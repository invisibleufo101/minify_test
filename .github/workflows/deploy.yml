name: Test Minify HTML, CSS, JS
on:
  push:
      branches: [master]

jobs:

  permissions:
    contents: write

  deploy:
      runs-on: ubuntu-latest
    
      steps:
        - name: Checkout repository code
          uses: actions/checkout@v5
          with:
            fetch-depth: 2

        - name: Minify CSS & JS
          uses: nizarmah/auto-minify@v3
          with:
            overwrite: true 

        - name: Commit to test branches
          uses: stefanzweifel/git-auto-commit-action@v5
          with:
            
            github_token: ${{ secrets.REPO_TOKEN }}
            branch: prod
            push_options: '--force'
